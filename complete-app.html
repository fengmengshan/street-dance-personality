<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>街舞人格测评系统 - 完整版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { 
            background: linear-gradient(135deg, #0F172A 0%, #1E293B 100%); 
            font-family: 'Inter', system-ui, sans-serif;
        }
        .card { 
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.9) 100%); 
            backdrop-filter: blur(10px);
        }
        .glow-text {
            background: linear-gradient(45deg, #8B5CF6, #EC4899, #06B6D4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .btn-primary {
            background: linear-gradient(135deg, #8B5CF6, #EC4899);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }
        .hidden { display: none; }
        .progress-bar {
            background: linear-gradient(90deg, #8B5CF6, #EC4899);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <!-- 首页 -->
    <div id="homePage" class="container mx-auto px-4 py-8">
        <div class="text-center mb-12">
            <h1 class="text-5xl font-bold mb-4 glow-text">🎭 街舞人格测评系统</h1>
            <p class="text-xl text-gray-300">发现你的街舞灵魂</p>
        </div>

        <div class="max-w-4xl mx-auto">
            <div class="card rounded-2xl p-8 mb-8 border border-purple-500/20">
                <h2 class="text-3xl font-bold mb-6 text-center">开始你的街舞人格探索之旅</h2>
                <p class="text-gray-300 mb-8 text-center text-lg">
                    通过62道专业题目，基于科学的心理学理论，发现你独特的街舞人格类型
                </p>
                
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-purple-500/10 border border-purple-500/30 rounded-lg p-6 text-center">
                        <div class="text-3xl mb-2">🧠</div>
                        <h3 class="font-bold mb-2 text-purple-300">科学测评</h3>
                        <p class="text-sm text-gray-300">基于大五人格理论的专业分析</p>
                    </div>
                    
                    <div class="bg-pink-500/10 border border-pink-500/30 rounded-lg p-6 text-center">
                        <div class="text-3xl mb-2">🎨</div>
                        <h3 class="font-bold mb-2 text-pink-300">12种人格</h3>
                        <p class="text-sm text-gray-300">独特的街舞人格类型命名</p>
                    </div>
                    
                    <div class="bg-cyan-500/10 border border-cyan-500/30 rounded-lg p-6 text-center">
                        <div class="text-3xl mb-2">💡</div>
                        <h3 class="font-bold mb-2 text-cyan-300">个性化建议</h3>
                        <p class="text-sm text-gray-300">专属的舞种推荐和发展建议</p>
                    </div>
                </div>

                <div class="text-center">
                    <button onclick="startAssessment()" class="btn-primary px-8 py-4 rounded-xl font-bold text-lg shadow-lg">
                        🚀 开始测评
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 测评页面 -->
    <div id="assessmentPage" class="hidden container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <!-- 进度条 -->
            <div class="mb-8">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-medium text-white">测评进度</span>
                    <span id="progressText" class="text-sm font-medium text-purple-300">0% 完成</span>
                </div>
                <div class="w-full bg-gray-700 rounded-full h-3">
                    <div id="progressBar" class="progress-bar h-3 rounded-full" style="width: 0%"></div>
                </div>
                <div class="flex justify-between items-center mt-2 text-sm text-gray-400">
                    <span id="questionCounter">第 1 题，共 5 题</span>
                </div>
            </div>

            <!-- 题目卡片 -->
            <div class="card rounded-2xl p-8 mb-8 border border-purple-500/20">
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <span id="questionCategory" class="text-sm font-medium text-purple-300 bg-purple-500/20 px-3 py-1 rounded-full">
                            题目类别
                        </span>
                        <span id="questionScenario" class="text-sm text-gray-400">
                            场景类型
                        </span>
                    </div>
                    <h2 id="questionContent" class="text-xl md:text-2xl font-bold text-white leading-relaxed">
                        题目内容将在这里显示
                    </h2>
                </div>

                <!-- 选项 -->
                <div id="optionsContainer" class="space-y-3">
                    <!-- 选项将通过JavaScript动态生成 -->
                </div>
            </div>

            <!-- 导航按钮 -->
            <div class="flex justify-between items-center">
                <button id="prevBtn" onclick="previousQuestion()" class="bg-gray-600 hover:bg-gray-500 px-6 py-3 rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    ← 上一题
                </button>

                <button id="nextBtn" onclick="nextQuestion()" class="btn-primary px-6 py-3 rounded-xl font-medium disabled:opacity-50 disabled:cursor-not-allowed">
                    下一题 →
                </button>

                <button id="submitBtn" onclick="submitAssessment()" class="hidden btn-primary px-6 py-3 rounded-xl font-medium">
                    提交测评
                </button>
            </div>

            <!-- 提示信息 -->
            <div id="selectHint" class="mt-4 text-center text-sm text-gray-400">
                请选择一个选项后继续
            </div>
        </div>
    </div>

    <!-- 结果页面 -->
    <div id="resultPage" class="hidden container mx-auto px-4 py-8">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-white mb-4">🎉 你的街舞人格画像</h1>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- 人格类型展示 -->
                <div class="card rounded-2xl p-8 border border-purple-500/20">
                    <div class="text-center mb-6">
                        <div id="personalityAvatar" class="w-24 h-24 mx-auto rounded-full mb-4 flex items-center justify-center text-4xl bg-purple-500/20">
                            🎭
                        </div>
                        <h2 id="personalityName" class="text-2xl font-bold text-white mb-2">
                            人格类型名称
                        </h2>
                        <p id="personalityNickname" class="text-lg text-purple-300 font-medium mb-4">
                            英文昵称
                        </p>
                        <p id="personalityDescription" class="text-gray-300 leading-relaxed">
                            人格描述将在这里显示
                        </p>
                    </div>

                    <div class="flex justify-center space-x-8 text-center mb-6">
                        <div>
                            <div id="matchScore" class="text-2xl font-bold text-green-400">85%</div>
                            <div class="text-sm text-gray-400">匹配度</div>
                        </div>
                        <div>
                            <div id="confidenceScore" class="text-2xl font-bold text-yellow-400">78%</div>
                            <div class="text-sm text-gray-400">置信度</div>
                        </div>
                    </div>

                    <!-- 特征展示 -->
                    <div class="mb-6">
                        <h3 class="font-bold text-white mb-3">✨ 你的特征</h3>
                        <div id="characteristicsList" class="space-y-2">
                            <!-- 特征列表将通过JavaScript生成 -->
                        </div>
                    </div>

                    <!-- 推荐舞种 -->
                    <div>
                        <h3 class="font-bold text-white mb-3">🎵 推荐舞种</h3>
                        <div id="recommendedStyles" class="flex flex-wrap gap-2">
                            <!-- 推荐舞种将通过JavaScript生成 -->
                        </div>
                    </div>
                </div>

                <!-- 雷达图 -->
                <div class="card rounded-2xl p-8 border border-purple-500/20">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">人格维度分析</h3>
                    <div class="h-80 flex items-center justify-center">
                        <canvas id="radarChart" width="300" height="300"></canvas>
                    </div>
                    <div id="dimensionScores" class="mt-4 space-y-2 text-sm">
                        <!-- 维度得分将通过JavaScript生成 -->
                    </div>
                </div>
            </div>

            <!-- 操作按钮 -->
            <div class="mt-12 text-center">
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="shareResult()" class="bg-green-600 hover:bg-green-500 px-6 py-3 rounded-xl font-medium transition-colors">
                        📱 分享结果
                    </button>
                    <button onclick="restartAssessment()" class="bg-gray-600 hover:bg-gray-500 px-6 py-3 rounded-xl font-medium transition-colors">
                        🔄 重新测评
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 简化的题目数据（5道示例题目）
        const questions = [
            {
                id: '1',
                content: '在Cypher中，我更喜欢尝试从未做过的新动作，即使可能失败',
                category: 'CYPHER_INTERACTION',
                dimension: 'OPENNESS',
                isReverse: false,
                scenarioType: 'CYPHER'
            },
            {
                id: '2',
                content: '我会制定详细的练习计划并严格执行',
                category: 'LEARNING_STYLE',
                dimension: 'CONSCIENTIOUSNESS',
                isReverse: false,
                scenarioType: 'PRACTICE'
            },
            {
                id: '3',
                content: '在Cypher中，我喜欢第一个进圈跳舞',
                category: 'CYPHER_INTERACTION',
                dimension: 'EXTRAVERSION',
                isReverse: false,
                scenarioType: 'CYPHER'
            },
            {
                id: '4',
                content: '在Cypher中，我会鼓励和支持其他舞者',
                category: 'CYPHER_INTERACTION',
                dimension: 'AGREEABLENESS',
                isReverse: false,
                scenarioType: 'CYPHER'
            },
            {
                id: '5',
                content: '在重要的Battle前，我会感到非常紧张',
                category: 'BATTLE_PERFORMANCE',
                dimension: 'NEUROTICISM',
                isReverse: false,
                scenarioType: 'BATTLE'
            }
        ];

        // 人格类型数据
        const personalityTypes = [
            {
                id: 'freestyle_poet',
                name: '即兴诗人',
                nickname: 'The Freestyle Poet',
                description: '用身体书写无声的诗歌，每一个动作都是情感的自然流露。你的舞蹈就像即兴的诗歌，充满了灵感和创造力。',
                characteristics: ['极强的即兴能力', '情感表达丰富', '创造力无限', '善于情感共鸣', '自由奔放的风格'],
                recommendedStyles: ['HIPHOP', 'HOUSE', 'KRUMP'],
                colorScheme: { primary: '#06FFA5', secondary: '#FF3366', accent: '#FFD23F' }
            }
        ];

        // 全局变量
        let currentQuestionIndex = 0;
        let answers = [];
        let personalityResult = null;

        // 李克特量表选项
        const likertOptions = [
            { value: 1, label: '非常不同意', color: 'bg-red-500' },
            { value: 2, label: '不同意', color: 'bg-orange-500' },
            { value: 3, label: '中立', color: 'bg-yellow-500' },
            { value: 4, label: '同意', color: 'bg-green-500' },
            { value: 5, label: '非常同意', color: 'bg-emerald-500' }
        ];

        // 开始测评
        function startAssessment() {
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('assessmentPage').classList.remove('hidden');
            currentQuestionIndex = 0;
            answers = [];
            showQuestion();
        }

        // 显示当前题目
        function showQuestion() {
            const question = questions[currentQuestionIndex];
            
            // 更新进度
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = Math.round(progress) + '% 完成';
            document.getElementById('questionCounter').textContent = `第 ${currentQuestionIndex + 1} 题，共 ${questions.length} 题`;
            
            // 更新题目内容
            document.getElementById('questionCategory').textContent = question.category.replace('_', ' ');
            document.getElementById('questionScenario').textContent = question.scenarioType;
            document.getElementById('questionContent').textContent = question.content;
            
            // 生成选项
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            likertOptions.forEach(option => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option-button w-full p-4 rounded-xl border-2 border-gray-600 hover:border-purple-500 text-left cursor-pointer transition-all duration-200';
                optionDiv.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 rounded-full ${option.color}"></div>
                        <span class="font-medium">${option.label}</span>
                    </div>
                `;
                optionDiv.onclick = () => selectOption(option.value, optionDiv);
                optionsContainer.appendChild(optionDiv);
            });
            
            // 更新按钮状态
            updateButtons();
        }

        // 选择选项
        function selectOption(score, element) {
            // 清除其他选项的选中状态
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('border-purple-500', 'bg-purple-500/20');
                btn.classList.add('border-gray-600');
            });
            
            // 设置当前选项为选中状态
            element.classList.remove('border-gray-600');
            element.classList.add('border-purple-500', 'bg-purple-500/20');
            
            // 保存答案
            const questionId = questions[currentQuestionIndex].id;
            const existingIndex = answers.findIndex(a => a.questionId === questionId);
            
            if (existingIndex >= 0) {
                answers[existingIndex].score = score;
            } else {
                answers.push({ questionId, score });
            }
            
            updateButtons();
        }

        // 更新按钮状态
        function updateButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            const selectHint = document.getElementById('selectHint');
            
            // 上一题按钮
            prevBtn.disabled = currentQuestionIndex === 0;
            
            // 检查当前题目是否已回答
            const currentAnswer = answers.find(a => a.questionId === questions[currentQuestionIndex].id);
            const hasAnswer = currentAnswer !== undefined;
            
            // 显示/隐藏提示
            selectHint.classList.toggle('hidden', hasAnswer);
            
            // 最后一题显示提交按钮
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.classList.add('hidden');
                submitBtn.classList.remove('hidden');
                submitBtn.disabled = !hasAnswer;
            } else {
                nextBtn.classList.remove('hidden');
                submitBtn.classList.add('hidden');
                nextBtn.disabled = !hasAnswer;
            }
        }

        // 下一题
        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            }
        }

        // 上一题
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        // 提交测评
        function submitAssessment() {
            if (answers.length !== questions.length) {
                alert('请完成所有题目后再提交');
                return;
            }
            
            // 简单的分析算法
            const scores = analyzeAnswers();
            personalityResult = {
                personalityType: personalityTypes[0], // 简化：直接使用第一个类型
                dimensionScores: scores,
                matchScore: 85,
                confidence: 78
            };
            
            showResult();
        }

        // 分析答案
        function analyzeAnswers() {
            // 简化的分析算法
            const dimensions = {
                openness: 0,
                conscientiousness: 0,
                extraversion: 0,
                agreeableness: 0,
                neuroticism: 0
            };
            
            const counts = {
                openness: 0,
                conscientiousness: 0,
                extraversion: 0,
                agreeableness: 0,
                neuroticism: 0
            };
            
            answers.forEach(answer => {
                const question = questions.find(q => q.id === answer.questionId);
                if (question) {
                    let score = answer.score;
                    if (question.isReverse) {
                        score = 6 - score;
                    }
                    
                    const dim = question.dimension.toLowerCase();
                    if (dimensions.hasOwnProperty(dim)) {
                        dimensions[dim] += score;
                        counts[dim]++;
                    }
                }
            });
            
            // 计算平均分并标准化到0-100
            Object.keys(dimensions).forEach(key => {
                if (counts[key] > 0) {
                    dimensions[key] = Math.round(((dimensions[key] / counts[key] - 1) / 4) * 100);
                } else {
                    dimensions[key] = 50; // 默认值
                }
            });
            
            return dimensions;
        }

        // 显示结果
        function showResult() {
            document.getElementById('assessmentPage').classList.add('hidden');
            document.getElementById('resultPage').classList.remove('hidden');
            
            const result = personalityResult;
            
            // 更新人格类型信息
            document.getElementById('personalityName').textContent = result.personalityType.name;
            document.getElementById('personalityNickname').textContent = result.personalityType.nickname;
            document.getElementById('personalityDescription').textContent = result.personalityType.description;
            document.getElementById('matchScore').textContent = result.matchScore + '%';
            document.getElementById('confidenceScore').textContent = result.confidence + '%';
            
            // 更新特征列表
            const characteristicsList = document.getElementById('characteristicsList');
            characteristicsList.innerHTML = '';
            result.personalityType.characteristics.forEach(char => {
                const li = document.createElement('div');
                li.className = 'text-sm text-gray-300 flex items-start';
                li.innerHTML = `<span class="text-purple-400 mr-2">•</span>${char}`;
                characteristicsList.appendChild(li);
            });
            
            // 更新推荐舞种
            const recommendedStyles = document.getElementById('recommendedStyles');
            recommendedStyles.innerHTML = '';
            result.personalityType.recommendedStyles.forEach(style => {
                const span = document.createElement('span');
                span.className = 'px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full text-sm';
                span.textContent = style;
                recommendedStyles.appendChild(span);
            });
            
            // 更新维度得分
            const dimensionScores = document.getElementById('dimensionScores');
            dimensionScores.innerHTML = '';
            const dimensionLabels = {
                openness: '开放性',
                conscientiousness: '尽责性',
                extraversion: '外向性',
                agreeableness: '宜人性',
                neuroticism: '神经质'
            };
            
            Object.entries(result.dimensionScores).forEach(([key, value]) => {
                const div = document.createElement('div');
                div.className = 'flex justify-between items-center';
                div.innerHTML = `
                    <span class="text-gray-300">${dimensionLabels[key]}</span>
                    <span class="font-semibold text-white">${value}分</span>
                `;
                dimensionScores.appendChild(div);
            });
            
            // 绘制雷达图
            drawRadarChart(result.dimensionScores);
        }

        // 绘制雷达图
        function drawRadarChart(scores) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['开放性', '尽责性', '外向性', '宜人性', '神经质'],
                    datasets: [{
                        label: '人格维度得分',
                        data: [scores.openness, scores.conscientiousness, scores.extraversion, scores.agreeableness, scores.neuroticism],
                        backgroundColor: 'rgba(139, 92, 246, 0.2)',
                        borderColor: '#8B5CF6',
                        borderWidth: 3,
                        pointBackgroundColor: '#8B5CF6',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            min: 0,
                            ticks: {
                                stepSize: 20,
                                color: '#F5F5F5',
                                backdropColor: 'transparent'
                            },
                            grid: { color: '#404040' },
                            angleLines: { color: '#404040' },
                            pointLabels: {
                                color: '#F5F5F5',
                                font: { size: 14, weight: 'bold' }
                            }
                        }
                    }
                }
            });
        }

        // 分享结果
        function shareResult() {
            const result = personalityResult;
            const shareText = `🎭 我的街舞人格类型是：${result.personalityType.name}！\n\n${result.personalityType.description}\n\n快来测测你的街舞人格：${window.location.href}`;
            
            if (navigator.share) {
                navigator.share({
                    title: '我的街舞人格测评结果',
                    text: shareText
                });
            } else {
                // 复制到剪贴板
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('分享内容已复制到剪贴板！');
                });
            }
        }

        // 重新开始测评
        function restartAssessment() {
            document.getElementById('resultPage').classList.add('hidden');
            document.getElementById('homePage').classList.remove('hidden');
            currentQuestionIndex = 0;
            answers = [];
            personalityResult = null;
        }

        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('街舞人格测评系统已加载完成！');
        });
    </script>
</body>
</html>